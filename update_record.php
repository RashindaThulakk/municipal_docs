// pseudo
if (file uploaded) {
  update ... set attachment = ?, attachment_type = ? ...
} else {
  update ... without attachment columns ...
}
